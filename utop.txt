open Magic_tree_fitter.Core_algo;;
open Magic_tree_fitter.Domain_types;;
open Magic_tree_fitter.Grammar_reader;;
open Magic_tree_fitter.Symbol_table;;
open Magic_tree_fitter.Parse_table_constructor;;
open Magic_tree_fitter.Grammar_reader_utils;;
open Magic_tree_fitter.Dump;;
open Magic_tree_fitter.Gss;;
open Magic_tree_fitter.Gss_parser;;
open Magic_tree_fitter.Gss_debug;;
open Magic_tree_fitter.Graph;;
open Magic_tree_fitter.Stack;;
open Magic_tree_fitter.Graph_monad_ops;;
open Magic_tree_fitter.Stack_monad_ops;;
open Magic_tree_fitter.Stack_ops;;
open Magic_tree_fitter.Get_all_actions;;

open Yojson.Basic.Util;;

let parse_tables = "grammars/lisp.g4" |> extract_grammar |> create_parse_tables;;
let config, initial_graph = setup_glr parse_tables;;
let c,g = run_glr initialise_stacks config initial_graph;;
run_glr construct_ast () c g
